apiVersion: skaffold/v3
kind: Config
metadata:
  name: logmower-eventsource

build:
  artifacts:
  - image: harbor.codemowers.eu/eaas/logmower-eventsource
    docker:
      dockerfile: Dockerfile

deploy:
  kubectl: {}

manifests:
  rawYaml:
     - k8s/staging/deployment.yaml

profiles:
  - name: dev
    activation:
      - command: dev
    build:
      artifacts:
        - image: harbor.codemowers.eu/eaas/logmower-eventsource
          docker:
            target: dev
          sync:
            manual:
              - src: '*.js'
                dest: .
    portForward:
      - resourceType: deployment
        resourceName: logmower-eventsource
        port: 9229
        localPort: 9229
    manifests:
      rawYaml:
        - k8s/dev/deployment.yaml
